# RabbitMQ: first steps
Учебный проект.

### В проекте используются
* Java 11
* RabbitMQ
* Maven

### Работа с RabbitMQ в контейнере Docker
Создать и стартовать контейнер

```
docker run -d -p 15672:15672 
              -p 5672:5672 
              -p5671:5671 
              --hostname rabbitmq 
              --name rabbitmq-container
              rabbitmq:3.9-management
```

Открыть консоль администрирования в браузере

```
http://localhost:15672
```
*логин: guest, пароль: guest*

Старт и остановка созданного контейнера

```
docker start rabbitmq-container
docker stop rabbitmq-container
```

Удаление контейнера

```
docker rm rabbitmq-container
```

Запустить bash в контейнере

```
docker exec -it rabbitmq-container /bin/bash
```

Завершить работу в bash

```
exit
```

### Sender - Receiver 
(без объявления exchange, 1 - > 1)

Sender посылает сообщения в очередь, 
Reciever получает сообщения из очереди вывод их на экран.

1. Запустить программу Receiver, которая ждет сообщения из очереди.
2. Запустить программу Sender, которая посылает в очередь 10 сообщений.

### Work Queues
(без объявления exchange, 1 - > следующий по очереди)

Task посылает сообщения в очередь.
Экземпляры Worker по очереди получают сообщения из очереди и "обрабатывают" их.

1. Запустить 3 экземпляра Worker.
2. Запустить программу Task, которая посылает в очередь 10 сообщений.

### Publish / Subscribe
(exchange FANOUT, 1 -> несколько, все получают)

Издатель (Publisher) посылает широковещательные сообобщения подписчикам (Subscriber).
Все подписчики получают все сообщения издателя.

1. Запустить 2 или более экземпляров Subscriber.
2. Запустить Publisher.

### Routing
(exchange DIRECT, 1 -> несколько в соотвествии ключами)

Эммитер (издатель) посылает сообщения для логов с соответствующими ключами маршрутизации.
Получатель создает очереди, очереди связывает с ключами маршрутизации,
в результате сообщение попадает в нужную очередь/очереди.

1. Запустить DirectLogReceiver.
2. Запустить DirectLogEmitter.

### Topics
(exchange TOPIC, 1 -> несколько в соотвествии паттернами ключей)

Издатель посылает сообщения в обменник с соответствующими ключами маршрутизации.
У получателя сообщения из обменника попадают в очередь в соответствии паттернами ключей маршрутизации
и извлекаются оттуда.

1. Запустить TopicSubscriber.
2. Запустить TopicPublisher.

### Headers
(exchange HEADERS, 1 -> несколько в соотвествии с заголовками)

Издатель посылает сообщения в обменник с соответствующими заголовками.
Получатель создает очереди, очереди связывает с заголовками,
в результате сообщение попадает в нужную очередь/очереди.

1. Запустить HeaderSubscriber.
2. Запустить HeaderPublisher.

### Exchange to Exchange binding
(exchange DIRECT, 1 -> несколько в соотвествии ключами + очереди из связанного exchange)

Издатель посылает сообщения в обменник с соответствующими ключами маршрутизации.
Подписчик создает очереди, очереди связывает с ключами маршрутизации,
создает еще один обменник, который также связывает с ключем маршрутизации,
в результате сообщение попадает в нужные очереди.

1. Запустить Subscriber.
2. Запустить Publisher.
